-malnutrition_prevalence_weight_for_age_percent_of_children_under_5,
-health_expenditure_per_capita_ppp_constant_2005_international,
-poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population)
glimpse(datosONU_tidy)
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
datosONU_tidy %>%
filter(country_name == "Chile")
datosONU_tidy %>%
filter(country_name == "Chile", year > 2000)
datosONU_tidy %>%
filter(year == 2000 | year == 2007)
datosONU_tidy %>%
filter(year %in% c(1995, 2000, 2005))
datosONU_tidy %>%
filter(!year %in% c(1995, 2000, 2005))
datosONU_tidy %>%
slice(5)
datosONU_tidy %>%
slice(1:5)
datosONU_tidy %>%
select(country_name, income_group, region, year, population_total)
datosONU_tidy %>%
select(-region, -income_group)
datosONU_tidy %>%
select(contains("per_capita"))
datosONU_tidy %>%
select(starts_with("p"))
datosONU_tidy %>%
select(where(is.numeric))
datosONU_tidy %>%
select(country_name, year, co2_emissions_metric_tons_per_capita) %>%
mutate(log_co2_emissions = log(co2_emissions_metric_tons_per_capita))
names(datosONU_tidy)
datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
datosONU_tidy
datosONU_tidy %>%
arrange(year)
datosONU_tidy %>%
select(income_group)
datosONU_tidy %>%
select(income_group) %>%
distinct()
datosONU_tidy %>%
select(income_group, region) %>%
distinct() %>%
arrange(income_group, region)
datosONU_tidy %>%
summarise(n_observaciones = n())
datosONU_tidy %>%
summarise(promedio_fertility_rate = mean(fertility_rate, na.rm = TRUE))
datosONU_tidy
names(datosONU_tidy)
rm(list = ls())
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
error = FALSE,
fig.align = 'center',
out.width='60%')
library(readr)
library(tidyverse)
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
knitr::include_graphics("Imagenes/ProcesoDS.png")
knitr::include_graphics("Imagenes/TidyData.png")
library(readr)
library(dplyr)
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
names(datosONU_tidy)
datosONU_tidy <- select(datosONU_tidy,
-labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate,
-public_spending_on_education_total_percent_of_government_expenditure,
-malnutrition_prevalence_weight_for_age_percent_of_children_under_5,
-health_expenditure_per_capita_ppp_constant_2005_international,
-poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population)
glimpse(datosONU_tidy)
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
datosONU_tidy %>%
filter(country_name == "Chile")
datosONU_tidy %>%
filter(country_name == "Chile", year > 2000)
datosONU_tidy %>%
filter(year == 2000 | year == 2007)
datosONU_tidy %>%
filter(year %in% c(1995, 2000, 2005))
datosONU_tidy %>%
filter(!year %in% c(1995, 2000, 2005))
datosONU_tidy %>%
slice(5)
datosONU_tidy %>%
slice(1:5)
datosONU_tidy %>%
select(country_name, income_group, region, year, population_total)
datosONU_tidy %>%
select(-region, -income_group)
datosONU_tidy %>%
select(contains("per_capita"))
datosONU_tidy %>%
select(starts_with("p"))
datosONU_tidy %>%
select(where(is.numeric))
datosONU_tidy %>%
select(country_name, year, co2_emissions_metric_tons_per_capita) %>%
mutate(log_co2_emissions = log(co2_emissions_metric_tons_per_capita))
names(datosONU_tidy)
datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
datosONU_tidy <- datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
datosONU_tidy
datosONU_tidy %>%
arrange(year)
datosONU_tidy %>%
select(income_group)
datosONU_tidy %>%
select(income_group) %>%
distinct()
datosONU_tidy %>%
select(income_group, region) %>%
distinct() %>%
arrange(income_group, region)
datosONU_tidy %>%
summarise(n_observaciones = n())
datosONU_tidy %>%
summarise(promedio_fertility_rate = mean(fertility_rate, na.rm = TRUE))
datosONU_tidy %>%
summarise(n_observaciones = n(),
promedio_fertility_rate = mean(fertility_rate, na.rm = TRUE))
datosONU_tidy %>%
group_by(region)
datosONU_tidy %>%
group_by(region) %>%
summarise(n_observaciones = n())
datosONU_tidy %>%
group_by(region, income_group) %>%
summarise(n_observaciones = n())
knitr::include_url('https://rstudio.cloud/')
datosONU_tidy %>%
# seleccionar variables
select(country_name, income_group, year, gdp_per_capita_constant_2005_us,
life_expectancy_at_birth_total_years) %>%
# filtrar observaciones
filter(income_group %in% c("Upper Middle Income", "High Income"), year == 2007)  %>%
# crear nueva variable a partir de una de las seleccionadas
mutate(log_gdp_per_capita = log(gdp_per_capita_constant_2005_us)) %>%
# generar gráfico
ggplot(aes(x = log_gdp_per_capita, y = life_expectancy_at_birth_total_years, col = income_group)) +
geom_point()
datosONU_tidy %>% names
datosONU_tidy %>%
# seleccionar variables
select(country_name, income_group, year, gdp_per_capita,
life_expectancy_at_birth_total_years) %>%
# filtrar observaciones
filter(income_group %in% c("Upper Middle Income", "High Income"), year == 2007)  %>%
# crear nueva variable a partir de una de las seleccionadas
mutate(log_gdp_per_capita = log(gdp_per_capita_constant_2005_us)) %>%
# generar gráfico
ggplot(aes(x = log_gdp_per_capita, y = life_expectancy_at_birth_total_years, col = income_group)) +
geom_point()
datosONU_tidy %>%
# seleccionar variables
select(country_name, income_group, year, gdp_per_capita,
life_expectancy) %>%
# filtrar observaciones
filter(income_group %in% c("Upper Middle Income", "High Income"), year == 2007)  %>%
# crear nueva variable a partir de una de las seleccionadas
mutate(log_gdp_per_capita = log(gdp_per_capita_constant_2005_us)) %>%
# generar gráfico
ggplot(aes(x = log_gdp_per_capita, y = life_expectancy_at_birth_total_years, col = income_group)) +
geom_point()
datosONU_tidy %>%
# seleccionar variables
select(country_name, income_group, year, gdp_per_capita,
life_expectancy) %>%
# filtrar observaciones
filter(income_group %in% c("Upper Middle Income", "High Income"), year == 2007)  %>%
# crear nueva variable a partir de una de las seleccionadas
mutate(log_gdp_per_capita = log(gdp_per_capita)) %>%
# generar gráfico
ggplot(aes(x = log_gdp_per_capita, y = life_expectancy, col = income_group)) +
geom_point()
datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
) %>% names
3.45 %>% round(digits = 1)
library(dplyr) # Verbos de manipulación de datos
3.45 %>% round(digits = 1)
knitr::opts_chunk$set(
echo = TRUE,
message = FALSE,
warning = FALSE,
error = FALSE,
fig.align = 'center',
out.width='60%')
library(readr)
library(tidyverse)
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
knitr::include_graphics("Imagenes/Filter.PNG")
datosONU_tidy %>%
arrange(year)
datosONU_tidy %>%
arrange(year, income_group)
datosONU_tidy %>%
arrange(-year)
datosONU_tidy %>%
arrange(-year, income_group)
datosONU_tidy %>%
summarise(n_paises = n_distinct(country))
datosONU_tidy
datosONU_tidy %>%
summarise(n_paises = n_distinct(country_name))
datosONU_tidy <- datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
names(datosONU_tidy)
datosONU_tidy %>%
summarise(n_observaciones = n(),
n_paises = n_distinct(country_name),
promedio_fertility_rate = mean(fertility_rate, na.rm = TRUE),
max_gdp_per_capita = max(gdp_per_capita, na.rm = TRUE))
datosONU_tidy %>% arrange(gdp_per_capita)
datosONU_tidy %>% arrange(-gdp_per_capita)
datosONU_tidy %>%
group_by(region) %>%
summarise(n_paises = n_distinct(country_name))
datosONU_tidy %>% filter(region = "North America") %>% distinct(country_name)
datosONU_tidy %>% filter(region == "North America") %>% distinct(country_name)
# Observe los valores únicos correspondiente a "income_group"
datosONU_tidy %>% distinct(income_group)
##################
## Cargar datos ##
##################
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
# Genere un nuevo objeto datosONU_tidy_new seleccionando las variables country_name, income_group, year,
# gdp_per_capita_constant_2005_us y life_expectancy_at_birth_total_years
datosONU_tidy_new <- datosONU_tidy %>%
select(country_name, income_group, year, gdp_per_capita_constant_2005_us, life_expectancy_at_birth_total_years)
# Sobreescriba el objeto datosONU_tidy_new filtrando aquellas observaciones con valores de income_group
# igual a "Upper Middle Income" o "High Income" y año igual a 2007
datosONU_tidy_new <- datosONU_tidy_new %>%
filter(income_group %in% c("Upper Middle Income", "High Income"),
year == 2007)
# Cree una nueva variable correspondiente al logaritmo de gdp_per_capita_constant_2005_us
datosONU_tidy_new <- datosONU_tidy_new %>%
mutate(log_gdp_per_capita = log(gdp_per_capita_constant_2005_us))
# Genere un gráfico de puntos (geom_point) entre log_gdp_per_capita (x) y life_expectancy_at_birth_total_years (y)
# Y permita que los puntos tengan un color distinto según el "income_group" al que pertenezcan
datosONU_tidy_new %>%
ggplot(aes(x = log_gdp_per_capita, y = life_expectancy_at_birth_total_years, col = income_group)) +
geom_point()
datosONU_tidy_ej <- datosONU_tidy %>%
select(country_name, income_group, region, year, population_total)
# Cambia el nombre de las variables a "pais", "grupo_ingresos", "anio", "total_poblacion". region no lo cambien.
datosONU_tidy_ej <- datosONU_tidy_ej %>%
rename(
"pais" = "country_name",
"grupo_ingresos" = "income_group",
"anio" = "year",
"total_poblacion" = "population_total"
)
datosONU_tidy_ej
# ¿Cual era la poblacion mundial en 2007? (considerando los países de nuestra base)
datosONU_tidy_ej %>%
filter(anio == 2007) %>%
summarise(poblacion_mundial = sum(total_poblacion, na.rm = TRUE))
# En un objeto datosONU_tidy_2007_reg guarden el resultado de calcular el total de poblacion por región
# asi como el número de países para cada region
datosONU_tidy_2007_reg <- datosONU_tidy_ej %>%
filter(anio == 2007) %>%
group_by(region) %>%
summarise(poblacion_mundial = sum(total_poblacion, na.rm = TRUE),
n_paises = n())
# Tomando los números recién calculados, creen una nueva columna calculando la población promedio
# por país para cada región
datosONU_tidy_2007_reg %>%
summarise(promedio_pob = poblacion_mundial/n_paises)
datosONU_tidy_2007_reg
# Tomando los números recién calculados, creen una nueva columna calculando la población promedio
# por país para cada región
datosONU_tidy_2007_reg %>%
summarise(region, promedio_pob = poblacion_mundial/n_paises)
%>%
datosONU_tidy_2007_reg
# Tomando los números recién calculados, creen una nueva columna calculando la población promedio
# por país para cada región
datosONU_tidy_2007_reg %>%
summarise(region, promedio_pob = poblacion_mundial/n_paises)
# Tomando los números recién calculados, creen una nueva columna calculando la población promedio
# por país para cada región
datosONU_tidy_2007_reg %>%
mutate(promedio_pob = poblacion_mundial/n_paises)
datosONU_tidy_ej <- datosONU_tidy %>%
select(country_name, income_group, region, year, population_total)
datosONU_tidy_ej %>%
# Dejar solo observaciones del año 2007
filter(anio == 2007) %>%
# Agrupar observaciones por región
group_by(region) %>%
# Calcular número de paises y población por región
summarise(poblacion_regional = sum(total_poblacion,
na.rm = TRUE),
n_paises = n()) %>%
# Calcular población por
mutate(promedio_pob = poblacion_regional/n_paises)
datosONU_tidy_ej
datosONU_tidy_ej %>%
# Cambiar nombre de columnas
rename("pais" = "country_name",
"grupo_ingresos" = "income_group",
"anio" = "year",
"total_poblacion" = "population_total") %>%
# Dejar solo observaciones del año 2007
filter(anio == 2007) %>%
# Calcular población mundial
summarise(poblacion_mundial =
sum(total_poblacion, na.rm = TRUE))
datosONU_tidy_ej <- datosONU_tidy_ej %>%
rename("pais" = "country_name",
"grupo_ingresos" = "income_group",
"anio" = "year",
"total_poblacion" = "population_total")
datosONU_tidy_ej %>%
# Dejar solo observaciones del año 2007
filter(anio == 2007) %>%
# Agrupar observaciones por región
group_by(region) %>%
# Calcular número de paises y población por región
summarise(poblacion_regional = sum(total_poblacion,
na.rm = TRUE),
n_paises = n()) %>%
# Calcular población por
mutate(promedio_pob = poblacion_regional/n_paises)
names(datosONU_tidy)
datosONU_tidy <- datosONU_tidy %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
names(datosONU_tidy)
library(readr) # Cargar datos
library(dplyr) # Manejo de datos
library(ggplot2) # Visualizar datos
##################
## Cargar datos ##
##################
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv")
######################
## Cargar librerías ##
######################
library(readr) # Cargar datos
library(dplyr) # Manejo de datos
######################
## Cargar librerías ##
######################
library(readr) # Cargar datos
library(dplyr) # Manejo de datos
##################
## Cargar datos ##
##################
datosONU_tidy <- read_csv("datos/DatosONU_tidy.csv") %>%
rename(
"co2_emissions" = "co2_emissions_metric_tons_per_capita",
"fertility_rate" = "fertility_rate_total_births_per_woman",
"forest_area" = "forest_area_percent_of_land_area",
"gdp_per_capita" = "gdp_per_capita_constant_2005_us",
"health_expenditure" = "health_expenditure_per_capita_ppp_constant_2005_international",
"labor_force_participation" = "labor_force_participation_rate_female_percent_of_female_population_ages_15_modeled_ilo_estimate",
"life_expectancy" = "life_expectancy_at_birth_total_years",
"malnutrition_prevalence" = "malnutrition_prevalence_weight_for_age_percent_of_children_under_5",
"urban_population" = "urban_population_percent_of_total",
"fossil_fuel_consumption" = "fossil_fuel_energy_consumption_percent_of_total",
"poverty" = "poverty_headcount_ratio_at_2_a_day_ppp_percent_of_population",
"public_spending_education" = "public_spending_on_education_total_percent_of_government_expenditure"
)
paises_sindatos <- datosONU_tidy %>%
select(country_name, year)
regiones <- datosONU_tidy %>%
distinct(country_name, region)
grupo_ingresos <- datosONU_tidy %>%
distinct(country = country_name, income_group)
variables <- datosONU_tidy %>%
select(-income_group, -region) %>%
arrange(fertility_rate)
# Explore los siguientes objetos
paises_sindatos
regiones
grupo_ingresos
variables
paises_sindatos
regiones
# Haga un left join entre "paises_sindatos" y "regiones". ¿Qué columna tienen en común?
# Asigne el resultado al objeto "paises_regiones"
paises_regiones <- paises_sindatos %>%
left_join(regiones, by = "country_name")
paises_sindatos %>%
left_join(regiones)
# Haga un left join entre "paises_sindatos" y "regiones". ¿Qué columna tienen en común?
# Asigne el resultado al objeto "paises_regiones"
paises_regiones <- paises_sindatos %>%
left_join(regiones, by = "country_name")
head(paises_regiones)
paises_regiones
grupo_ingresos
# Haga un left join del objeto recién creado con "grupo_ingresos". ¿Qué columna tienen en común? ¿tienen el mismo nombre?
# Asigne el resultado al objeto "paises_regiones_ingresos"
paises_regiones_ingresos <- paises_regiones %>%
left_join(grupo_ingresos, by = c("country_name" = "country"))
head(paises_regiones_ingresos)
variables
paises_regiones_ingresos
# Haga un left join del objeto recién creado con "variables" ¿Qué columnas tienen en común?
# Noten que el join requiere especificar dos columnas en este caso
paises_regiones_ingresos_variables <- paises_regiones_ingresos %>%
left_join(variables, by = c("country_name", "year"))
head(paises_regiones_ingresos_variables)
# ¿Qué países que estaban sobre la media de emisiones de co2 en 1987 lo seguían estando en 2007?
co2_sobreprom_1987 <- datosONU_tidy %>%
filter(year == 1987,
co2_emissions > mean(co2_emissions, na.rm = TRUE)) %>%
select(country_name)
co2_sobreprom_2007 <- datosONU_tidy %>%
filter(year == 2007,
co2_emissions > mean(co2_emissions, na.rm = TRUE)) %>%
select(country_name)
intersect(co2_sobreprom_1987, co2_sobreprom_2007)
paises_sindatos %>%
left_join(regiones, by = "country_name")  %>%
left_join(grupo_ingresos, by = c("country_name" = "country"))  %>%
left_join(variables, by = c("country_name", "year"))
left_join(left_join(left_join(paises_sindatos, regiones, by = "country_name"), grupo_ingresos, by = c("country_name" = "country")), variables, by = c("country_name", "year"))
paises_sindatos %>%
left_join(regiones, by = "country_name")  %>%
left_join(grupo_ingresos, by = c("country_name" = "country"))  %>%
left_join(variables, by = c("country_name", "year"))
left_join(left_join(left_join(paises_sindatos, regiones, by = "country_name"),
grupo_ingresos, by = c("country_name" = "country")),
variables, by = c("country_name", "year"))
